<div class="row h-100">
    <!-- LEFT: Config + History (40%) -->
    <div class="col-lg-4 col-md-5 d-flex flex-column">
        <!-- TOP: Configuration -->
        <div class="card shadow-sm mb-3" style="flex: 0 0 auto;">
            <div class="card-header py-2">
                <i class="fas fa-cog me-2 text-primary"></i> Target Configuration
            </div>
            <div class="card-body">
                <!-- Host -->
                <div class="mb-3">
                    <div class="input-group input-group-sm">
                        <span class="input-group-text" style="min-width: 70px;">Host</span>
                        <input type="text" class="form-control" id="walk-target" value="127.0.0.1"
                               placeholder="127.0.0.1" list="recent-targets">
                        <datalist id="recent-targets"></datalist>
                        <button class="btn btn-outline-secondary" type="button" onclick="WalkerModule.clearTarget()"
                                title="Clear" aria-label="Clear target">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                </div>

                <!-- Port & Community -->
                <div class="row g-2 mb-3">
                    <div class="col-6">
                        <div class="input-group input-group-sm">
                            <span class="input-group-text">Port</span>
                            <input type="number" class="form-control" id="walk-port" value="1061">
                        </div>
                    </div>
                    <div class="col-6">
                        <div class="input-group input-group-sm">
                            <span class="input-group-text">Comm</span>
                            <input type="text" class="form-control" id="walk-comm" value="public">
                        </div>
                    </div>
                </div>

                <!-- OID -->
                <div class="mb-3">
                    <div class="input-group input-group-sm">
                        <span class="input-group-text" style="min-width: 70px;">OID</span>
                        <input type="text" class="form-control" id="walk-oid" value="IF-MIB::ifTable"
                               placeholder="1.3.6.1.2.1.2.2 or IF-MIB::ifTable">
                        <button class="btn btn-outline-secondary" onclick="WalkerModule.browseOid()"
                                title="Browse MIBs" aria-label="Browse MIBs">
                            <i class="fas fa-sitemap"></i>
                        </button>
                    </div>
                    <div class="form-text small text-muted">Enter OID or MIB name</div>
                </div>

                <!-- Options -->
                <div class="mb-3">
                    <div class="d-flex gap-3">
                        <div class="form-check form-switch mb-0">
                            <input class="form-check-input" type="checkbox" id="walk-parse-toggle" checked
                                   onchange="WalkerModule.toggleOptions()">
                            <label class="form-check-label small" for="walk-parse-toggle">Parse to JSON</label>
                        </div>
                        <div class="form-check form-switch mb-0">
                            <input class="form-check-input" type="checkbox" id="walk-use-mibs" checked disabled>
                            <label class="form-check-label small" for="walk-use-mibs">Resolve OIDs</label>  <!-- was: Resolve -->
                        </div>
                    </div>
                    <div class="form-text small text-muted">Parsing requires MIB resolution</div>
                </div>

                <!-- Progress -->
                <div id="walk-progress" class="d-none mb-3">
                    <div class="d-flex justify-content-between small mb-1">
                        <span id="walk-progress-text">Walking...</span>
                        <span id="walk-progress-count">0 items</span>
                    </div>
                    <div class="progress" style="height: 5px;">
                        <div class="progress-bar progress-bar-striped progress-bar-animated"
                             id="walk-progress-bar" role="progressbar" style="width: 0%"></div>
                    </div>
                </div>

                <!-- Error Alert -->
                <div id="walk-error" class="alert alert-danger py-2 small d-none mb-3">
                    <i class="fas fa-exclamation-circle me-1"></i>
                    <span id="walk-error-text"></span>
                </div>

                <button class="btn btn-primary btn-sm w-100" id="btn-walk-run" onclick="WalkerModule.execute()">
                    <i class="fas fa-play me-1"></i> Run Walk
                </button>
            </div>
        </div>

        <!-- BOTTOM: History -->
        <div class="card shadow-sm" style="flex: 1 1 auto; min-height: 250px; max-height: var(--walker-history-max-height); overflow: hidden;">  <!-- was calc() inline -->
            <div class="card-header py-1 d-flex justify-content-between align-items-center"
                 style="min-height: 32px;">
                <span class="small">
                    <i class="fas fa-history me-2 text-info"></i> Walk History
                </span>
                <div class="d-flex align-items-center gap-2">
                    <span class="badge bg-secondary" id="walk-history-count">0 saved</span>
                    <button class="btn btn-sm btn-outline-danger py-0 px-1"
                            onclick="WalkerModule.clearHistory()"
                            title="Clear History" aria-label="Clear history">
                        <i class="fas fa-trash"></i>
                    </button>
                </div>
            </div>

            <div class="card-body p-0 h-100 overflow-auto">
                <div id="walk-history-empty" class="text-center text-muted p-3">
                    <i class="fas fa-history fa-lg mb-2 opacity-25"></i>  <!-- was fa-2x -->
                    <div class="small">
                        No walk history yet.<br>
                        Recent walks will appear here.
                    </div>
                </div>

                <div id="walk-history-list"
                     class="list-group list-group-flush"
                     style="display: none;">
                    <!-- History items injected by WalkerModule.renderHistory() -->
                </div>
            </div>
        </div>
    </div>

    <!-- RIGHT: Results (60%) -->
    <div class="col-lg-8 col-md-7">
        <div class="card shadow-sm h-100">
            <div class="card-header py-2 d-flex justify-content-between align-items-center">
                <span><i class="fas fa-list-alt me-2 text-success"></i> Current Result</span>
                <div class="d-flex align-items-center gap-2">
                    <!-- Search in results -->
                    <div class="input-group input-group-sm" style="width: 180px;">
                        <span class="input-group-text"><i class="fas fa-search"></i></span>
                        <input type="text" class="form-control" id="walk-result-search"
                               placeholder="Search results..." oninput="WalkerModule.filterResults()">
                    </div>
                    <span class="badge bg-secondary" id="walk-count">0 items</span>
                    <div class="btn-group btn-group-sm">
                        <button class="btn btn-outline-secondary py-1 px-2" onclick="WalkerModule.clearResults()"
                                title="Clear results" aria-label="Clear results">
                            <i class="fas fa-times"></i>
                        </button>
                        <button class="btn btn-outline-secondary py-1 px-2" onclick="WalkerModule.copyToClipboard()"
                                title="Copy Output" aria-label="Copy output">
                            <i class="fas fa-copy"></i>
                        </button>
                        <button class="btn btn-outline-secondary py-1 px-2" onclick="WalkerModule.download('json')"
                                title="Export JSON" aria-label="Export JSON">
                            <i class="fas fa-file-code"></i>
                        </button>
                        <button class="btn btn-outline-secondary py-1 px-2" onclick="WalkerModule.download('csv')"
                                title="Export CSV" aria-label="Export CSV">
                            <i class="fas fa-file-csv"></i>
                        </button>
                    </div>
                </div>
            </div>
            <div class="card-body p-0" style="height: var(--walker-results-height); overflow: hidden;">  <!-- was calc() inline -->
                <pre id="walk-output" class="m-0 p-3 border-0 bg-light font-monospace small overflow-auto"
                     style="height: 100%;">No data yet. Run a walk to see results.</pre>
            </div>
        </div>
    </div>
</div>
